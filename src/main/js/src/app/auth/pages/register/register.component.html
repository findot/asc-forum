<div class="app-register-container">

  <form
    [formGroup]="form"
    class="app-register light px-3"
    style="max-width: 800px"
    (ngSubmit)="onSubmit()"
  >
    <container>

      <row>
        <column
          class="mb-3"
          [size]="{ base: 12, xs: 8, sm: 6, md: 4 }"
          [offset]="{ base: 0, xs: 2, sm: 3, md: 4 }"
        >
          <app-auth-logo [size]="4"></app-auth-logo>
        </column>
      </row>

      <row><column>
        <hr class="mb-4 mt-2">
      </column></row>

      <row>
        
        <column
          [size]="{ base: 12, sm: 10, md: 8 }"
          [offset]="{ base: 0, sm: 1, md: 0 }"
          [order]="{ base: 2, md: 1 }"
        >

          <input-row
            [formControl]="username"
            label="Username"
            name="username"
            class="my-3"
            [label-size]="{ base: 4, sm: 3 }"
            [input-size]="{ base: 8, sm: 9 }"
            [x-gutter]="0"
          ></input-row>

          <input-row
            [formControl]="email"
            type="email"
            label="Email"
            name="email"
            class="my-3"
            [label-size]="{ base: 4, sm: 3 }"
            [input-size]="{ base: 8, sm: 9 }"
            [x-gutter]="0"
          ></input-row>

          <input-row
            [formControl]="password"
            type="password"
            label="Password"
            name="password"
            class="my-1"
            [label-size]="{ base: 4, sm: 3 }"
            [input-size]="{ base: 8, sm: 9 }"
            [x-gutter]="0"
          ></input-row>
    
          <input-row
            [formControl]="passwordConfirmation"
            type="password"
            label="Confirmation"
            name="password-confirmation"
            class="my-3"
            [label-size]="{ base: 4, sm: 3 }"
            [input-size]="{ base: 8, sm: 9 }"
            [x-gutter]="0"
          ></input-row>

          <row *ngIf="!form.pristine && form.errors">
            <column [offset]="3">
              <div class="bg-warning text-dark text-center fw-bold p-2">
                <fa-icon [icon]="faExclamationTriangle"></fa-icon>
                <span class="mx-2">{{error}}</span>
                <fa-icon [icon]="faExclamationTriangle"></fa-icon>
              </div>
            </column>
          </row>
        </column>

        <column
          [size]="{ base: 12, xs: 8, sm: 6, md: 4 }"
          [offset]="{ base: 0, xs: 2, sm: 3, md: 0 }"
          [order]="{ base: 1, md: 2 }"
        >
          <div class="h-100 d-flex flex-column justify-content-center text-center p-2">
              
            <h3 class="fs-1 fw-bold m-0">Registration</h3>
            <a
              routerLink="/login"
              class="text-light fw-light text-decoration-none"
            >
              Already have an account ?
            </a>
          </div>
        </column>

      </row>

      <row>
        <column>
          <hr class="mt-4">
          <div class="d-flex justify-content-around">
            <div
              ngbTooltip="Please fill out the form before to proceed"
              placement="bottom"
              triggers="manual"
              #submitTooltip="ngbTooltip"
              (mouseenter)="handleSubmitHover(true, submitTooltip)"
              (mouseleave)="handleSubmitHover(false, submitTooltip)"
            >
              <button
                type="submit"
                [disabled]="!processing && !form.valid"
                
                class="btn btn-submit px-5 fw-bold"
                
                [class.btn-outline-light]="!form.valid"
                
                [class.btn-light]="!processing && form.valid"
                [class.text-primary]="!processing && form.valid"
                [class.submission-loading]="submission?.kind === 'loading'"
                [class.submission-success]="submission?.kind === 'succeeded'"
                [class.submission-error]="submission?.kind === 'failed'"
              >
                <span *ngIf="submission?.kind === 'loading'">Loading...</span>
                <span *ngIf="submission?.kind === 'succeeded'">
                  <fa-icon [icon]="faCheck"></fa-icon>
                </span>
                <span *ngIf="submission?.kind === 'failed'">
                  <fa-icon [icon]="faTimes"></fa-icon>
                </span>
                <span *ngIf="!processing">
                  Register
                </span>
              </button>
            </div>
          </div>
        </column>
      </row>

    </container>
  </form>

</div>
